
(function(e,g,h,b){var f="liteBox",c={revealSpeed:400,background:"rgba(0,0,0,.8)",overlayClose:true,escKey:true,navKey:true,closeTip:"tip-l-fade",closeTipText:"Close",prevTip:"tip-t-fade",prevTipText:"Previous",nextTip:"tip-t-fade",nextTipText:"Next",callbackInit:function(){},callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},callbackError:function(){},callbackPrev:function(){},callbackNext:function(){},callbackAfterShow:function(){},errorMessage:"Error loading content."};function i(k,j){this.element=k;this.$element=e(this.element);this.options=e.extend({},c,j);this._defaults=c;this._name=f;this.init()}function d(){return g.innerHeight?g.innerHeight:e(g).height()}function a(j){e(j).each(function(){var k=new Image();k.src=this;if(k.width>0){e("<img />").attr("src",this).addClass("litebox-preload").appendTo("body").hide()}})}i.prototype={init:function(){var j=this;this.$element.on("click",function(k){k.preventDefault();j.openLitebox()});keyEsc=27,keyLeft=37,keyRight=39;e("body").off("keyup").on("keyup",function(k){if(j.options.escKey&&k.keyCode==keyEsc){j.closeLitebox()}if(j.options.navKey&&k.keyCode==keyLeft){e(".litebox-prev").trigger("click")}if(j.options.navKey&&k.keyCode==keyRight){e(".litebox-next").trigger("click")}});this.options.callbackInit.call(this)},openLitebox:function(){var m=this;this.options.callbackBeforeOpen.call(this);m.buildLitebox();var j=this.$element;m.populateLitebox(j);if(m.options.overlayClose){$litebox.on("click",function(o){if(o.target===this||e(o.target).hasClass("litebox-container")||e(o.target).hasClass("litebox-error")){m.closeLitebox()}})}$close.on("click",function(){m.closeLitebox()});if(this.$element.attr("data-litebox-group")){var m=this,n=this.$element.attr("data-litebox-group"),l=e('[data-litebox-group="'+this.$element.attr("data-litebox-group")+'"]');var k=[];e('[data-litebox-group="'+n+'"]').each(function(){var o=e(this).attr("href");k.push(o)});a(k);e(".litebox-nav").show();$prevNav.off("click").on("click",function(){m.options.callbackPrev.call(this);var o=l.index(j);j=l.eq(o-1);if(!e(j).length){j=l.last()}m.populateLitebox(j)});$nextNav.off("click").on("click",function(){m.options.callbackNext.call(this);var o=l.index(j);j=l.eq(o+1);if(!e(j).length){j=l.first()}m.populateLitebox(j)})}this.options.callbackAfterOpen.call(this)},buildLitebox:function(){var j=this;$litebox=e("<div>",{"class":"litebox-overlay"}),$close=e("<div>",{"class":"litebox-close "+this.options.closeTip,"data-tooltip":this.options.closeTipText}),$text=e("<div>",{"class":"litebox-text"}),$error=e('<div class="litebox-error"><span>'+this.options.errorMessage+"</span></div>"),$prevNav=e("<div>",{"class":"litebox-nav litebox-prev "+this.options.prevTip,"data-tooltip":this.options.prevTipText}),$nextNav=e("<div>",{"class":"litebox-nav litebox-next "+this.options.nextTip,"data-tooltip":this.options.nextTipText}),$container=e("<div>",{"class":"litebox-container"}),$loader=e("<div>",{"class":"litebox-loader"});e("body").prepend($litebox.css({"background-color":this.options.background}));$litebox.append($close,$text,$prevNav,$nextNav,$container);$litebox.fadeIn(this.options.revealSpeed)},populateLitebox:function(m){var p=this,j=m.attr("href"),n=e(".litebox-content");$litebox.append($loader);var l=m.attr("data-litebox-text");if(typeof l=="undefined"||l==""){e(".litebox-text").removeClass("active");e(".litebox-text").html()}else{e(".litebox-text").html(l);e(".litebox-text").addClass("active")}if(j.match(/\.(jpeg|jpg|gif|png|bmp)/i)!==null){var k=e("<img>",{src:j,"class":"litebox-content"});p.transitionContent("image",n,k);e("img.litebox-content").imagesLoaded(function(){$loader.remove()});k.error(function(){p.liteboxError();$loader.remove()})}else{if(videoURL=j.match(/(youtube|youtu|vimeo|dailymotion|kickstarter)\.(com|be)\/((watch\?v=([-\w]+))|(video\/([-\w]+))|(projects\/([-\w]+)\/([-\w]+))|([-\w]+))/)){var q="";if(videoURL[1]=="youtube"){q="http://www.youtube.com/embed/"+videoURL[5]}if(videoURL[1]=="youtu"){q="http://www.youtube.com/embed/"+videoURL[3]}if(videoURL[1]=="vimeo"){q="http://player.vimeo.com/video/"+videoURL[3]}if(videoURL[1]=="dailymotion"){q="https://www.dailymotion.com/embed/video/"+videoURL[7]}if(videoURL[1]=="kickstarter"){q="https://www.kickstarter.com/projects/"+videoURL[9]+"/"+videoURL[10]+"/widget/video.html"}if(q){var o=e("<iframe>",{src:q,frameborder:"0",vspace:"0",hspace:"0",scrolling:"no",allowfullscreen:"","class":"litebox-content",style:"background: #000"});p.transitionContent("embed",n,o);o.load(function(){$loader.remove()})}}else{if(j.substring(0,1)=="#"){if(e(j).length){$html=e("<div>",{"class":"litebox-content litebox-inline-html"});$html.append(e(j).clone());p.transitionContent("inline",n,$html)}else{p.liteboxError()}$loader.remove()}else{var o=e("<iframe>",{src:j,frameborder:"0",vspace:"0",hspace:"0",scrolling:"auto","class":"litebox-content",allowfullscreen:""});p.transitionContent("iframe",n,o);o.load(function(){$loader.remove()})}}}p.options.callbackAfterShow.call(this,m)},transitionContent:function(k,l,j){var m=this;if(k!="inline"){$container.removeClass("litebox-scroll")}l.remove();$container.append(j);if(k=="inline"){$container.addClass("litebox-scroll")}m.centerContent();e(g).on("resize",function(){m.centerContent()})},centerContent:function(){$litebox.css({height:d()});$container.css({"line-height":$container.height()+"px"});if(typeof $html!="undefined"&&e(".litebox-inline-html").outerHeight()<$container.height()){e(".litebox-inline-html").css({"margin-top":"-"+(e(".litebox-inline-html").outerHeight())/2+"px",top:"50%"})}},closeLitebox:function(){this.options.callbackBeforeClose.call(this);$litebox.fadeOut(this.options.revealSpeed,function(){e(".litebox-nav").hide();$litebox.empty().remove();e(".litebox-preload").remove()});e(".tipsy").fadeOut(this.options.revealSpeed,function(){e(this).remove()});e(".litebox-prev").off("click");e(".litebox-next").off("click");this.options.callbackAfterClose.call(this)},liteboxError:function(){this.options.callbackError.call(this);$container.append($error)}};e.fn[f]=function(j){return this.each(function(){if(!e.data(this,f)){e.data(this,f,new i(this,j))}})}})(jQuery,window,document);